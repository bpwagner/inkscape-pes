import numpy as np
import matplotlib.pyplot as plt

#points are in mm coming from inkscape
pts = [(88.90000000035559, 76.200000000304797), (88.90000000035559, 76.200000000304797), (88.134125089241422, 76.370194111416581), (87.145221244793021, 77.125361511419612), (86.682540489235606, 76.200000000304797), (86.562336400346226, 75.959591822526065), (86.802741755902744, 75.634056955858085), (86.682540489235606, 75.393651600301567), (86.512546755901582, 75.053664133633532), (86.046183000344172, 74.927287844744143), (85.876189267010162, 74.587300378076122), (85.695885955898333, 74.226690933630223), (86.056495400344204, 73.738387222517161), (85.876189267010162, 73.377777778071277), (85.8160900447877, 73.25757368918191), (85.568044933675594, 73.472807644738339), (85.473015067008561, 73.377777778071277), (85.377988022563741, 73.282747911404229), (85.473015067008561, 73.1089949780702), (85.473015067008561, 72.974603578069676), (85.338623667008022, 72.974603578069676), (85.164870733673979, 73.069633444736724), (85.069840867006945, 72.974603578069676), (84.974811000339898, 72.879573711402628), (85.129942911451636, 72.691630644735213), (85.069840867006945, 72.571429378068075), (84.984844000339933, 72.40143564473405), (84.751663533672328, 72.338246089178256), (84.666666667005344, 72.16825517806646), (84.606564622560654, 72.048051089177079), (84.726768711450035, 71.885282244731997), (84.666666667005344, 71.765078155842616), (84.581669800338332, 71.59508724473082), (84.397883867004268, 71.496295355841539), (84.263492467003729, 71.361903955841001), (84.129101067003205, 71.227512555840462), (84.030312000336139, 71.043726622506398), (83.860318267002128, 70.958729755839386), (83.740114178112748, 70.898627711394695), (83.552171111445347, 71.053759622506433), (83.457144067000527, 70.958729755839386), (83.362114200333465, 70.863699889172338), (83.517243289222975, 70.675759644727151), (83.457144067000527, 70.55555555583777), (83.027940511443248, 69.697154089167668), (83.07999357811012, 70.607608622504642), (82.650792844775069, 69.749207155834554), (82.442515666996457, 69.332647155832888), (83.017094711443207, 68.796173755830736), (82.247618644773468, 68.539681733607495), (81.992628044772459, 68.454684866940482), (81.696260844771274, 68.624678600274507), (81.441270244770237, 68.539681733607495), (81.080660800324338, 68.419480466940342), (80.974906489212813, 67.903327066938274), (80.634921844767007, 67.733333333604264), (80.394513666988274, 67.613129244714898), (80.068978800320295, 67.853537422493631), (79.828570622541562, 67.733333333604264), (79.658576889207538, 67.648336466937252), (79.605702555874004, 67.390261178047339), (79.425396422539961, 67.330159133602649), (79.170405822538939, 67.245162266935637), (78.874038622537753, 67.415156000269661), (78.619048022536731, 67.330159133602649), (78.438741889202689, 67.270057089157959), (78.385867555869126, 67.011981800268046), (78.215873822535116, 66.926984933601034), (78.095669733645749, 66.866882889156344), (77.932900889200653, 66.987086978045724), (77.812699622533515, 66.926984933601034), (77.472712155865494, 66.756991200267024), (77.346335866976091, 66.2906274447096), (77.00634840030807, 66.120633711375589), (76.765943044751552, 66.000432444708451), (76.440408178083587, 66.240837800264956), (76.20000000030484, 66.120633711375589), (75.860012533636819, 65.950642800263807), (75.754261044747508, 65.434489400261739), (75.39365160030161, 65.314285311372373), (75.138661000300601, 65.229288444705361), (74.848059600299422, 65.379475822483741), (74.587300378076165, 65.314285311372373), (74.295764822519445, 65.241401422483193), (74.072487533629669, 64.983995000259938), (73.780951978072935, 64.911111111370758), (73.520195578071892, 64.84592060025939), (73.224161400292942, 65.010935933593387), (72.974603578069704, 64.911111111370758), (72.524704666956794, 64.731152111370037), (72.180582644733207, 64.354063711368525), (71.765078155842644, 64.104762711367542), (71.507395155841621, 63.950152911366914), (71.227512555840491, 63.835979911366458), (70.958729755839428, 63.701588511365919), (70.421164155837275, 63.432802889142621), (69.916206511390811, 63.08529702247457), (69.346032955832968, 62.895237289140475), (68.387930844718028, 62.575871800250312), (68.613773533607826, 63.372506111364608), (67.733333333604307, 62.49206308913886), (67.638303466937245, 62.397033222471812), (67.853537422493673, 62.148990933581935), (67.733333333604307, 62.088888889137245), (67.49292515582556, 61.968684800247878), (67.195767733602153, 62.088888889137245), (66.926984933601076, 62.088888889137245), (65.986242311375094, 62.088888889137245), (65.045502511371325, 62.088888889137245), (64.10476271136757, 62.088888889137245), (63.835979911366493, 62.088888889137245), (63.553402089143141, 62.173885755804257), (63.298411489142126, 62.088888889137245), (63.11810817803029, 62.028786844692561), (63.065231022474521, 61.770711555802642), (62.89523728914051, 61.685714689135629), (62.775036022473365, 61.625612644690946), (62.612267178028269, 61.74581673358032), (62.492063089138895, 61.685714689135629), (62.322069355804878, 61.600717822468624), (62.25888262247129, 61.367537355801026), (62.08888888913728, 61.282540489134014), (61.851006600247437, 61.163597933577989), (61.156680666911328, 61.374979555801055), (60.879366289132442, 61.282540489134014), (60.594276689131298, 61.187510622466966), (60.358104666908133, 60.974393333577233), (60.073015066906997, 60.879366289132399), (59.9455211780176, 60.836866444687786), (59.80423226690592, 60.879366289132399), (59.669840866905382, 60.879366289132399), (59.266666666903767, 60.879366289132399), (58.855663622457676, 60.958433666910494), (58.460318266900543, 60.879366289132399), (58.165644400232701, 60.820429822465499), (57.94550542245404, 60.549073155797743), (57.653967044675099, 60.476189266908563), (57.336825466896059, 60.396904578019353), (55.654191178000431, 60.476189266908563), (55.234921844665429, 60.476189266908563), (53.756613622437293, 60.476189266908563), (52.278308222431377, 60.476189266908563), (50.800000000203241, 60.476189266908563), (48.918517577973489, 60.476189266908563), (47.037037977965973, 60.476189266908563), (45.155555555736221, 60.476189266908563), (44.617989955734068, 60.476189266908563), (44.080424355731921, 60.476189266908563), (43.542855933507546, 60.476189266908563), (43.274073133506469, 60.476189266908563), (42.997266755727587, 60.411001578019416), (42.736507533504323, 60.476189266908563), (42.324214733502679, 60.5792652891312), (41.939277733501136, 60.776290266909768), (41.526984933499492, 60.879366289132399), (41.396603911276742, 60.911960133576976), (41.254188933498398, 60.846769622465608), (41.123810733497876, 60.879366289132399), (40.711515111274004, 60.982439489132815), (40.326580933494689, 61.179467289133605), (39.914285311270817, 61.282540489134014), (39.450769177935626, 61.398418111356705), (38.71557464459935, 61.075547422466521), (38.301588511264363, 61.282540489134014), (38.181384422374997, 61.342642533578704), (38.396615555709189, 61.590684822468582), (38.301588511264363, 61.685714689135629), (38.111528777930268, 61.875771600247504), (37.685297022373014, 61.495654955801541), (37.495237289038919, 61.685714689135629), (37.400210244594092, 61.780744555802684), (37.590267155705966, 61.993859022470197), (37.495237289038919, 62.088888889137245), (37.400210244594092, 62.183918755804299), (37.212267177926677, 62.028786844692561), (37.092063089037303, 62.088888889137245), (36.922069355703293, 62.173885755804257), (36.858882622369698, 62.407066222471848), (36.688888889035688, 62.49206308913886), (36.568684800146322, 62.55216513358355), (36.380744555701128, 62.397033222471812), (36.285714689034073, 62.49206308913886), (36.190684822367025, 62.587092955805915), (36.380744555701128, 62.800210244695648), (36.285714689034073, 62.895237289140475), (36.073223933477671, 63.107730866919098), (35.72940388903185, 63.131719755808085), (35.47936628903085, 63.29841148914209), (34.750942266805716, 63.784028444699587), (35.401439089030532, 63.619145755810038), (34.673015066805398, 64.104762711367542), (34.422977466804397, 64.271454444701533), (34.079157422358577, 64.295446155812741), (33.866666666802175, 64.507936911369157), (33.771636800135127, 64.602966778036205), (33.866666666802175, 64.776719711370234), (33.866666666802175, 64.911111111370758), (33.597883866801098, 65.179893911371835), (33.376593422355768, 65.506608466928697), (33.060318266798951, 65.717459511373988), (32.948496177909611, 65.792008511374291), (32.752171111242163, 65.622432466929155), (32.657144066797336, 65.717459511373988), (32.562114200130289, 65.812489378041036), (32.717243289019805, 66.000432444708451), (32.657144066797336, 66.120633711375604), (32.572147200130331, 66.290627444709614), (32.338963911240512, 66.353817000265423), (32.253967044573507, 66.523810733599433), (32.193867822351038, 66.644012000266585), (32.31406908901819, 66.806780844711682), (32.253967044573507, 66.926984933601048), (32.168970177906495, 67.096978666935073), (31.9357897112389, 67.160165400268653), (31.850792844571892, 67.330159133602663), (31.790690800127209, 67.45036322249203), (31.910894889016575, 67.613129244714912), (31.850792844571892, 67.733333333604278), (31.680799111237882, 68.073320800272313), (31.214438177902679, 68.199697089161702), (31.044444444568668, 68.539681733607509), (30.984342400123985, 68.659885822496875), (31.104546489013352, 68.822654666941972), (31.044444444568668, 68.942855933609124), (30.95944757790166, 69.112849666943134), (30.70137228901174, 69.165726822498897), (30.641270244567057, 69.346032955832953), (30.556273377900052, 69.601020733611762), (30.761474333456427, 69.911973178057451), (30.641270244567057, 70.152381355836184), (30.581168200122374, 70.27258544472555), (30.298198089010128, 70.032177266946817), (30.238096044565445, 70.152381355836184), (29.997687866786709, 70.633194889171435), (30.408089777899459, 71.255099778062814), (30.238096044565445, 71.76507815584263), (30.117891955676075, 72.125690422510743), (29.601738555674011, 72.231441911400054), (29.431744822339997, 72.571429378068089), (29.27047740011713, 72.893967044736044), (29.593015066785089, 73.458411489182751), (29.431744822339997, 73.78095197807292), (29.346747955672992, 73.950945711406945), (29.113567489005394, 74.014132444740525), (29.028570622338385, 74.184126178074521), (28.908369355671237, 74.424534355853268), (29.113567489005394, 74.735486800298958), (29.028570622338385, 74.990477400299966), (28.933543577893563, 75.275564178078895), (28.720426289003822, 75.511739022524281), (28.625396422336774, 75.796825800303196), (28.540399555669769, 76.051816400304219), (28.710393289003783, 76.348183600305404), (28.625396422336774, 76.603174200306427), (28.53036655566973, 76.888260978085356), (28.295106111224342, 77.117987044752937), (28.222222222335166, 77.409522600309657), (28.093898882334649, 77.922817089200606), (28.353122533446797, 78.901789533648966), (28.222222222335166, 79.425396422539947), (28.119148740112529, 79.837692044763813), (27.922121222333963, 80.222626222543141), (27.819047740111326, 80.634921844767007), (27.64792540011064, 81.319409511436405), (28.092843371223534, 80.749261355878588), (27.819047740111326, 81.844444444771852), (27.746163568999926, 82.135980000328573), (27.488757146776674, 82.359257289218348), (27.41587297566527, 82.650792844775069), (27.350683593442788, 82.91155206699834), (27.41587297566527, 83.188358444777222), (27.41587297566527, 83.457144067000527), (27.41587297566527, 83.860318267002128), (27.41587297566527, 84.263492467003744), (27.41587297566527, 84.666666667005359), (27.41587297566527, 84.935449467006435), (27.500869560110054, 85.218024467007552), (27.41587297566527, 85.473015067008589), (27.355771213442807, 85.653321200342631), (27.0728002556639, 85.695885955898362), (27.012698493441434, 85.87618926701019), (26.927701626774429, 86.131179867011213), (27.065411113441648, 86.418975978123484), (27.012698493441434, 86.682540489235635), (26.92935234455221, 87.099269822570648), (26.712597493440235, 87.479770289238829), (26.609523728995377, 87.89206308924048), (26.516284844550558, 88.265019755908639), (26.609523728995377, 90.001058955915582), (26.609523728995377, 90.311111111472385), (26.609523728995377, 92.326984933702661), (26.609523728995377, 94.342855933710723), (26.609523728995377, 96.358729755941013), (26.609523728995377, 98.508994978171827), (26.609523728995377, 100.65926020040264), (26.609523728995377, 102.80952260041126), (26.609523728995377, 103.34709102263562), (26.609523728995377, 103.88465662263778), (26.609523728995377, 104.42222222263993), (26.609523728995377, 104.69100502264101), (26.609523728995377, 104.95978782264208), (26.609523728995377, 105.22857062264316), (26.609523728995377, 105.36296202264369), (26.567025577884095, 105.50425093375537), (26.609523728995377, 105.63174482264476), (27.54540338011023, 107.50350468931893), (26.643745713439955, 105.39968195597717), (27.012698493441434, 107.24444444487344), (27.096044642330657, 107.66117377820845), (27.355771213442804, 108.03325555598771), (27.41587297566527, 108.45396704487828), (27.491896304554462, 108.98613091154708), (27.310447735664848, 109.53954046710484), (27.41587297566527, 110.06666666710696), (27.453146628998752, 110.25303493377437), (27.758945977888867, 110.28953473377452), (27.819047740111326, 110.46984086710856), (27.819047740111326, 112.30520817822701), (27.628989417888345, 110.49289842266421), (28.222222222335166, 111.67936628933563), (28.383492466780258, 112.00190395600359), (28.060952260112298, 112.56634840045029), (28.222222222335166, 112.88888888934046), (28.392215955669176, 113.22887635600848), (28.858576889004379, 113.35525264489789), (29.028570622338389, 113.69523728934369), (29.088672666783072, 113.81544137823307), (28.986073600115997, 113.97091760045591), (29.028570622338389, 114.0984114893453), (29.123600489005437, 114.38350108934644), (29.336717777895178, 114.61967311156961), (29.431744822340001, 114.90476271157074), (29.474244666784614, 115.03225660046014), (29.389247800117609, 115.18044020046074), (29.431744822340001, 115.30793691157236), (30.405199822343896, 118.22829908936181), (29.31550877789509, 114.6722878004587), (30.238096044565449, 116.51745951157719), (30.298198089010132, 116.63766360046657), (30.177994000120766, 116.80043244491165), (30.238096044565449, 116.9206337115788), (30.323092911232457, 117.09062744491281), (30.556273377900055, 117.15381700046861), (30.64127024456706, 117.32381073380263), (30.701372289011744, 117.44401200046978), (30.64127024456706, 117.59259353380371), (30.64127024456706, 117.72698493380425), (30.775661644567599, 117.99576773380532), (30.864138311234615, 118.29292515602872), (31.044444444568672, 118.53333333380748), (31.272513866791808, 118.83742777825313), (31.622723422348763, 119.03559011158725), (31.850792844571895, 119.33968173381071), (32.031098977905948, 119.58008991158944), (32.119575644572976, 119.87724733381285), (32.253967044573507, 120.14603295603615), (32.522752666796805, 120.68359855603831), (32.762130733464431, 121.23690086715162), (33.060318266798959, 121.75872975604258), (33.300723622355477, 122.17944124493316), (33.649967977912425, 122.53485497826792), (33.866666666802182, 122.96825517826966), (33.926768711246865, 123.0884564449368), (33.806564622357499, 123.25122528938191), (33.866666666802182, 123.37142937827126), (34.045341555691785, 123.72877633382825), (34.831513889028265, 124.21393608938574), (35.07618926680702, 124.5809519782761), (35.24288382236324, 124.8309895782771), (35.266872711252226, 125.17480962272292), (35.47936628903085, 125.38730037827933), (35.574393333475676, 125.48233024494638), (35.787510622365417, 125.29227333383452), (35.882540489032465, 125.38730037827933), (36.095031244588867, 125.59979395605795), (36.105408555700016, 125.95324342272603), (36.285714689034073, 126.19365160050478), (36.513784111257209, 126.49774322272822), (36.823280289036227, 126.73121720050693), (37.092063089037296, 127.00000000050801), (37.360845889038373, 127.53756560051016), (37.565028022372523, 128.11262160051245), (37.898411489040519, 128.61269962273667), (38.211508822375102, 129.08234562273856), (38.79483957793299, 129.35257622273963), (39.107936911267579, 129.82222222274152), (39.274628644601577, 130.07225982274252), (39.41608124460214, 130.34348384496582), (39.511111111269194, 130.62857062274475), (39.553608133491579, 130.75606733385635), (39.41608124460214, 130.93671777830153), (39.511111111269194, 131.03174482274636), (39.606140977936242, 131.12677468941339), (39.819255444603755, 130.93671777830153), (39.91428531127081, 131.03174482274636), (40.009315177937857, 131.12677468941339), (39.819255444603755, 131.33989197830314), (39.91428531127081, 131.43492184497018), (40.009315177937857, 131.52994888941501), (40.222432466827591, 131.33989197830314), (40.317459511272425, 131.43492184497018), (40.412489377939472, 131.52994888941501), (40.257357466827735, 131.71789195608244), (40.317459511272425, 131.83809604497179), (40.40245637793943, 132.00808977830582), (40.586242311273494, 132.10687884497287), (40.720633711274033, 132.24127024497341), (40.855025111274571, 132.37566164497395), (40.975398533497284, 132.52571637830786), (41.123810733497876, 132.64444444497502), (41.66137633350003, 133.04761864497661), (42.198941933502169, 133.45079284497825), (42.736507533504323, 133.85396704497984), (42.870898933504861, 133.85396704497984), (43.027862466838826, 133.77942086720176), (43.139681733505938, 133.85396704497984), (43.455959711284983, 134.06481808942513), (43.677247333508092, 134.39153546720422), (43.946032955731383, 134.6603182672053), (44.080424355731921, 134.79470966720581), (44.179213422398988, 134.9784956005399), (44.349207155732998, 135.06349246720688), (44.589612511289516, 135.18369655609627), (44.965495822402126, 134.87343273387279), (45.155555555736221, 135.06349246720688), (45.250585422403269, 135.15852233387395), (45.060525689069173, 135.37163680054147), (45.155555555736221, 135.4666666672085), (45.345615289070317, 135.6567264005426), (45.706913355738429, 135.38166980054149), (45.961903955739444, 135.4666666672085), (48.882266133528901, 136.4401216672124), (45.326257666848015, 135.35043062276361), (47.171429377966504, 136.27301506721173), (47.291630644633649, 136.33311711165643), (47.454399489078739, 136.21291302276705), (47.574603577968119, 136.27301506721173), (48.804107511306363, 136.88776844499196), (46.837219000187396, 136.59263737832413), (48.784126177972951, 137.07936628943719), (49.635774066865253, 137.29227755610469), (49.63540435575414, 136.7211190449913), (50.396825800201626, 137.48254048943878), (50.49185566686868, 137.57756753388361), (50.301795933534578, 137.79068482277336), (50.396825800201626, 137.88571468944039), (50.479248800201958, 137.96813768944074), (51.44649491131694, 137.80578653388451), (51.606348400206464, 137.88571468944039), (52.835855155766936, 138.50046806722062), (50.868966644647955, 138.20533700055279), (52.815873822433524, 138.69206308944362), (53.076630222434567, 138.757253600555), (53.381814044658014, 138.57185900055424), (53.622222222436747, 138.69206308944362), (53.742426311326113, 138.7521651338883), (53.502018133547381, 139.03513524500056), (53.622222222436747, 139.09523728944524), (53.862630400215487, 139.21544137833462), (54.159787822438901, 139.09523728944524), (54.42857062243997, 139.09523728944524), (54.966136222442124, 139.09523728944524), (55.503704644666492, 139.09523728944524), (56.041270244668645, 139.09523728944524), (56.310053044669715, 139.09523728944524), (56.586862244670826, 139.03004960055608), (56.847618644671861, 139.09523728944524), (57.139154200228582, 139.16812117833439), (57.385184244674015, 139.36402008944631), (57.653967044675085, 139.49841148944682), (58.19153546689946, 139.63280288944736), (58.720095355790463, 139.81049282278141), (59.26666666690376, 139.90158851167067), (59.915543533573022, 140.00973324500444), (61.091456289133284, 139.75302391167008), (61.685714689135658, 139.90158851167067), (64.317877178035076, 140.55962913389553), (60.162451289129564, 140.1180811783382), (63.701588511365948, 140.7079369116739), (64.364401511368598, 140.81840433389655), (65.045502511371325, 140.7079369116739), (65.717459511374017, 140.7079369116739), (65.851850911374555, 140.7079369116739), (65.986242311375094, 140.7079369116739), (66.120633711375632, 140.7079369116739), (66.25502511137617, 140.7079369116739), (66.403606644710095, 140.64783486722922), (66.523810733599461, 140.7079369116739), (66.693801644711257, 140.79293377834091), (66.756991200267066, 141.02611424500853), (66.926984933601076, 141.11111111167551), (67.047186200268229, 141.17121315612019), (67.195767733602153, 141.11111111167551), (67.330159133602692, 141.11111111167551), (67.46455053360323, 141.11111111167551), (67.598941933603768, 141.11111111167551), (67.733333333604307, 141.11111111167551), (68.405290333606999, 141.11111111167551), (69.077247333609677, 141.11111111167551), (69.749207155834597, 141.11111111167551), (70.689946955838352, 141.11111111167551), (71.63068675584212, 141.11111111167551), (72.571429378068103, 141.11111111167551), (72.84021217806918, 141.11111111167551), (73.117018555848063, 141.17630162278689), (73.377777778071334, 141.11111111167551), (73.669313333628054, 141.03822722278633), (73.89259062251783, 140.78082080056308), (74.184126178074564, 140.7079369116739), (74.444885400297821, 140.64274640056252), (74.721691778076718, 140.7079369116739), (74.990477400300009, 140.7079369116739), (75.259260200301085, 140.57354551167336), (75.51173902252431, 140.39978975611712), (75.796825800303239, 140.30476271167228), (75.924319689192629, 140.26226286722766), (76.072506111415436, 140.34725973389467), (76.20000000030484, 140.30476271167228), (76.485086778083755, 140.20973284500525), (76.721261622529155, 139.9966155561155), (77.00634840030807, 139.9015885116707), (77.261339000309079, 139.81659164500368), (77.572291444754782, 140.02178977833782), (77.812699622533515, 139.9015885116707), (78.152684266979321, 139.73159477833667), (78.279060555868725, 139.26523102277926), (78.619048022536745, 139.09523728944524), (78.739252111426126, 139.03513524500056), (78.927192355871313, 139.1902671561123), (79.022222222538346, 139.09523728944524), (79.117252089205408, 139.00021024500043), (78.927192355871298, 138.78709295611068), (79.022222222538346, 138.69206308944365), (79.117252089205408, 138.59703322277659), (79.305192333650595, 138.75216513388833), (79.425396422539961, 138.69206308944365), (79.765383889207982, 138.52206935610963), (79.891760178097371, 138.05570842277442), (80.231744822543192, 137.88571468944042), (80.351948911432558, 137.82561264499572), (80.514717755877655, 137.9458167338851), (80.634921844767021, 137.88571468944042), (80.974906489212842, 137.7157209561064), (81.124992266991214, 137.29021451166025), (81.441270244770251, 137.07936628943719), (81.691307844771259, 136.91267173388096), (81.997581044772488, 136.84288382276958), (82.247618644773482, 136.67618926721335), (82.405756222551901, 136.5707651561018), (82.516401444774559, 136.40740646721227), (82.650792844775097, 136.27301506721173), (82.785184244775621, 136.13862366721119), (82.94854293366518, 136.02797844498852), (83.053967044776698, 135.86984086721012), (83.220661600332917, 135.61980326720914), (83.290449511444308, 135.31353006720789), (83.457144067000542, 135.06349246720688), (84.226270178114731, 133.9098018894245), (83.532680844778611, 135.68100033387603), (84.263492467003772, 133.85396704497984), (84.421328067004396, 133.45938086720048), (84.448015000337833, 133.00886388942089), (84.666666667005373, 132.64444444497499), (84.862235378117276, 132.3184975338626), (85.303021333674579, 132.17808068941758), (85.473015067008603, 131.83809604497176), (85.593219155897984, 131.59768786719303), (85.388018200341591, 131.28673542274734), (85.473015067008603, 131.0317448227463), (85.533117111453294, 130.85144151163448), (85.816090044787757, 130.80887675607875), (85.876189267010204, 130.62857062274472), (85.876189267010204, 128.79320613384849), (85.686132355898337, 130.60551306718907), (86.279366289234048, 129.41904802273987), (86.33946551145651, 129.29884393385049), (86.279366289234048, 129.1502652227388), (86.279366289234048, 129.01587382273826), (86.279366289234048, 128.74709102273718), (86.194369422567036, 128.46451320051384), (86.279366289234048, 128.20952260051283), (86.33946551145651, 128.029219289401), (86.597543622568665, 127.97634213384522), (86.682540489235649, 127.80634840051121), (86.843810733680755, 127.48381073384326), (86.521270244790557, 126.91936628939655), (86.682540489235649, 126.59682580050638), (86.767537355902661, 126.42683206717236), (87.000717822570266, 126.36364533383878), (87.085714689237264, 126.19365160050478), (87.20591877812663, 125.95324342272603), (86.965510600347883, 125.62770855605807), (87.085714689237264, 125.38730037827933), (87.170711555904276, 125.21730946716754), (87.403892022571867, 125.15411991161173), (87.488888889238865, 124.98412617827772), (87.609092978128245, 124.7437208227212), (87.368684800349499, 124.41818595605324), (87.488888889238865, 124.17777777827449), (87.573885755905877, 124.00778404494046), (87.831961044795804, 123.95490971160693), (87.89206308924048, 123.77460357827289), (87.977059955907478, 123.51961297827187), (87.807066222573468, 123.22324295604845), (87.89206308924048, 122.96825517826966), (87.952165133685156, 122.78794904493562), (88.210240422575083, 122.73507188937984), (88.295237289242081, 122.56507815604581), (88.355339333686771, 122.44487688937868), (88.235135244797391, 122.28210804493357), (88.295237289242081, 122.16190395604421), (88.380234155909093, 121.99191022271019), (88.613414622576698, 121.92872348937661), (88.698411489243682, 121.7587297560426), (88.758513533688372, 121.63852566715323), (88.655914467021304, 121.4830494449304), (88.698411489243682, 121.355555556041), (88.793441355910744, 121.07046877826208), (89.006558644800478, 120.8342939338167), (89.101588511467526, 120.54920715603777), (89.144085533689918, 120.42171044492615), (89.041486467022835, 120.2662342227033), (89.101588511467526, 120.14603295603617), (89.186585378134538, 119.97603922270214), (89.444660667024465, 119.92316206714638), (89.504762711469127, 119.74285593381232), (89.68825795591431, 119.19236455603235), (89.32126464480173, 117.87430211158262), (89.504762711469127, 117.32381073380265), (90.00296677813779, 115.82919853379667), (89.907936911470742, 117.81525840047128), (89.907936911470742, 116.5174595115772), (89.907936911470742, 116.35808015602102), (89.821842200359271, 114.67377793379205), (89.907936911470742, 114.50158851156914), (89.992933778137754, 114.33159477823511), (90.226114244805359, 114.26840522267932), (90.311111111472343, 114.0984114893453), (90.371213155917033, 113.97821022267816), (90.311111111472343, 113.82962868934422), (90.311111111472343, 113.69523728934369), (90.311111111472343, 113.29206308934209), (90.491417244806399, 112.84632413378473), (90.311111111472343, 112.48571468933886), (90.277820178138882, 112.41913564489415), (89.208852711467941, 112.48571468933886), (89.101588511467511, 112.48571468933886), (88.156070689241503, 112.48571468933886), (89.291645422579379, 112.3906848226718), (88.295237289242067, 112.88888888934046), (88.054831933685549, 113.00909297822984), (87.729297067017583, 112.76868480045108), (87.488888889238837, 112.88888888934046), (87.318895155904812, 112.97388575600748), (87.266020822571278, 113.2319610448974), (87.085714689237236, 113.29206308934207), (86.575733489235176, 113.46205682267609), (86.000144089232876, 113.18663897823053), (85.473015067008561, 113.29206308934207), (85.056285733673548, 113.37540895600907), (84.680221800338728, 113.61189142267668), (84.263492467003715, 113.69523728934368), (83.99992795589155, 113.74795075601055), (83.720705755890421, 113.64252664489902), (83.457144067000485, 113.69523728934368), (81.016285911435176, 114.18340835601229), (83.290096733666488, 114.09841148934528), (81.441270244770209, 114.09841148934528), (81.335961844769798, 114.09841148934528), (79.224917044761341, 114.03084748934502), (79.022222222538304, 114.09841148934528), (78.737135444759389, 114.19344135601234), (78.500960600313988, 114.40655864490208), (78.215873822535073, 114.50158851156912), (77.953409978089582, 114.58907457823615), (75.7311893780807, 114.50158851156912), (75.393651600301567, 114.50158851156912), (73.512169178071815, 114.50158851156912), (71.630686755842063, 114.50158851156912), (69.74920715583454, 114.50158851156912), (69.077247333609634, 114.50158851156912), (68.405290333606942, 114.50158851156912), (67.73333333360425, 114.50158851156912), (67.598941933603712, 114.50158851156912), (67.464550533603173, 114.50158851156912), (67.330159133602635, 114.50158851156912), (67.195767733602096, 114.50158851156912), (67.047186200268172, 114.44148646712443), (66.92698493360102, 114.50158851156912), (66.756991200267009, 114.58658537823614), (66.693801644711201, 114.81976584490374), (66.523810733599404, 114.90476271157073), (66.283402555820672, 115.02496397823788), (65.907519244708055, 114.71470297823663), (65.71745951137396, 114.90476271157073), (65.622432466929141, 114.99978975601555), (65.847115222485584, 115.3432965337947), (65.71745951137396, 115.30793691157234), (64.934140444704184, 115.09430315601593), (64.239154111368052, 114.63597991156963), (63.500000000253991, 114.30000000045719), (63.500000000253991, 114.30000000045719)]
thread_offset = 3.175
r1_ink = [80.0, 60.0]
r2_ink = [60.0, 150.0]
r1_emb = [20.0, 0.0]
r2_emb = [40.0, 180.]



def getzigzag(pts):
    pts = np.array(pts)
    #x, y = pts.T
    # plt.plot(x, y, 'ro')
    #plt.plot(x, y, 'b-')

    zigzag = []

    for i in range(len(pts) - 1):
        d = 5.0
        point1 = pts[i]
        point2 = pts[i + 1]
        x1, y1 = pts[i]
        x2, y2 = pts[i + 1]
        mid = (point1 + point2) / 2.0
        mid = [mid[0], mid[1]]
        perp_vector = [(y1 - y2), (x2 - x1)]

        denom = np.sqrt((y1 - y2) ** 2 + (x2 - x1) ** 2)
        if denom > 10000.0:
            denom = 10000.0

        if denom == 0:
            denom = 0.000001

        dist = d / denom
        if dist > 10000.0:
            dist = 10000.0

        temp = [dist * perp_vector[0], dist * perp_vector[1]]
        point3 = [point1[0] + temp[0], point1[1] + temp[1]]
        point4 = [mid[0] - temp[0], mid[1] - temp[1]]
        zigzag.append(point3)
        zigzag.append(point4)

    return zigzag


def get_theta(p1, p2):
    from math import atan2, pi
    dx = p2[0] - p1[0]
    dy = p2[1] - p1[1]
    rads = atan2(-dy, dx)
    rads %= 2 * pi
    return rads

r1_ink = np.array(r1_ink)
r2_ink = np.array(r2_ink)
r1_emb = np.array(r1_emb)
r2_emb = np.array(r2_emb)
pts = np.array(pts)

#plot the origianl points
x,y = pts.T
plt.plot(x, -y, 'r-')
#plot the inkscape registration points
x,y = r1_ink
plt.plot(x, -y, 'ro')
x,y = r2_ink
plt.plot(x, -y, 'r^')

#plot the embroidery registration points
x,y =np.array(r1_emb)
plt.plot(x, -y, 'mo')
x,y = np.array(r2_emb)
plt.plot(x, -y, 'm^')

#calculate length of lines
dist_1 = np.linalg.norm(r1_ink-r2_ink)
dist_2 = np.linalg.norm(r1_emb-r2_emb)
#scale should be 1...
scale_factor = dist_2/dist_1

# #scale the inkscape points
# scaled_pts = pts.copy()
# scaled_pts = scaled_pts * scale_factor
# #plot the origianl points
# x,y = scaled_pts.T
# plt.plot(x, -y, 'g-')

#find the midpoints of the registration points so we can get a true offfset
#for the translation matrix
# #midpoints
mid_1 = (r1_ink + r2_ink)/2.0
mid_2 = (r1_emb + r2_emb)/2.0
x,y =np.array(mid_1)
plt.plot(x, -y, 'ro')
x,y = np.array(mid_2)
plt.plot(x, -y, 'mo')


#translate the pts to embroidery machine points
#first move all the points to homogenius coordinates
# add a 1 column to the end of points
h_pts = np.array(pts)
temp = np.ones((len(pts),1))
h_pts = np.append(h_pts, temp, axis=1)

# identity matrix
ident = np.zeros((3,3), dtype=float)
ident[0][0]=1.0
ident[1][1]=1.0
ident[2][2]=1.0

# flipy matrix
fy = np.zeros((3,3), dtype=float)
fy[0][0]=1.0
fy[1][1]=-1.0
fy[2][2]=1

print 'flip y matrix'
print fy

# Scale Matrix
s = np.zeros((3,3), dtype=float)
s[0][0]=scale_factor
s[1][1]=scale_factor
s[2][2]=1

print 'scale matrix'
print s

# translation matrix to origin
to_dx = -mid_1[0]
to_dy = -mid_1[1]

to = np.zeros((3,3), dtype=float)
to[0][0]=1
to[0][2]=to_dx
to[1][1]=1
to[1][2]=to_dy
to[2][2]=1


# translation matrix
t_dx = mid_2[0]
t_dy = mid_2[1]

t = np.zeros((3,3), dtype=float)
t[0][0]=1
t[0][2]=t_dx
t[1][1]=1
t[1][2]=t_dy
t[2][2]=1

print 'trans matrix'
print t

r = np.zeros((3,3),dtype=float)
#find angle of first
theta_coord = get_theta(mid_1, r2_ink)
#find angle of offset
theta_offset = get_theta(mid_2, r2_emb)
#combine them and wrap around the circle
theta = (theta_coord - theta_offset) % (2 * np.pi)
print 'theta', theta

#theta = np.pi/3; #test, 60degrees
r[0][0]=np.cos(theta)
r[0][1]=-1*np.sin(theta)
r[1][0]=np.sin(theta)
r[1][1]=np.cos(theta)
r[2][2]=1

print 'rot matrix'
print r

#move points to origin
# set up like this for testing
m = ident
m = np.dot (m, to)
new_pts = []
new_h_pts = []
for h_pt in h_pts:
    trans = np.reshape(h_pt,(3,1))
    new_pt = np.dot(m ,trans)
    pt =(new_pt[0][0]/new_pt[2][0], new_pt[1][0]/new_pt[2][0])
    new_h_pt = (new_pt[0][0], new_pt[1][0], new_pt[2][0])
    new_pts.append(pt)
    new_h_pts.append(new_h_pt)
new_pts = np.array(new_pts)
h_pts = new_h_pts
print new_pts
x,y = new_pts.T
plt.plot(x, -y, 'y-')


#scale it at the origin
# set up like this for testing
m = ident
m = np.dot (m, s)
new_pts = []
new_h_pts = []
for h_pt in h_pts:
    trans = np.reshape(h_pt,(3,1))
    new_pt = np.dot(m ,trans)
    pt =(new_pt[0][0]/new_pt[2][0], new_pt[1][0]/new_pt[2][0])
    new_h_pt = (new_pt[0][0], new_pt[1][0], new_pt[2][0])
    new_pts.append(pt)
    new_h_pts.append(new_h_pt)
new_pts = np.array(new_pts)
h_pts = new_h_pts
print new_pts
x,y = new_pts.T
plt.plot(x, -y, 'y-')

#rotate it at the origin
# set up like this for testing
m = ident
m = np.dot (m, r)
new_pts = []
new_h_pts = []
for h_pt in h_pts:
    trans = np.reshape(h_pt,(3,1))
    new_pt = np.dot(m ,trans)
    pt =(new_pt[0][0]/new_pt[2][0], new_pt[1][0]/new_pt[2][0])
    new_h_pt = (new_pt[0][0], new_pt[1][0], new_pt[2][0])
    new_pts.append(pt)
    new_h_pts.append(new_h_pt)
new_pts = np.array(new_pts)
h_pts = new_h_pts
print new_pts
x,y = new_pts.T
plt.plot(x, -y, 'y-')


#move it to where it needs to be
# set up like this for testing
m = ident
m = np.dot (m, t)
new_pts = []
new_h_pts = []
for h_pt in h_pts:
    trans = np.reshape(h_pt,(3,1))
    new_pt = np.dot(m ,trans)
    pt =(new_pt[0][0]/new_pt[2][0], new_pt[1][0]/new_pt[2][0])
    new_h_pt = (new_pt[0][0], new_pt[1][0], new_pt[2][0])
    new_pts.append(pt)
    new_h_pts.append(new_h_pt)
new_pts = np.array(new_pts)
h_pts = new_h_pts
print new_pts
x,y = new_pts.T
plt.plot(x, -y, 'y-')


x,y = new_pts.T
plt.plot(x, -y, 'm-')

plt.show()


#generate and plot zigzag
# zigzag = getzigzag(new_pts)
# x,y = np.array(zigzag).T
# plt.plot(x, -y, 'b')
# #plt.plot(x, y, 'b-')
# plt.show()




