import numpy as np
import matplotlib.pyplot as plt
from sr_export_PES import *

thread_offset = 12.7
r1_ink = [63.500000000253991, -170.54285593401548]
r2_ink = [63.500000000253991, -221.34285593421868]
r1_emb = [0.0, 50.799999999999997]
r2_emb = [0.0, -50.799999999999997]
pts = [(25.400000000101599, -208.09999866749905), (25.400000000101599, -208.09999866749905), (23.396377726760253, -204.5892473563739), (25.72334708010289, -200.73863840080293), (27.606760184554872, -197.75026066745767), (28.995703022338205, -195.83773662300558), (28.975258844560347, -193.17663788966161), (30.90114046679027, -191.58462515632192), (33.049102755687748, -189.29597791186831), (36.31003942236746, -189.22434991186802), (39.11942900015648, -188.38579995630911), (42.113194355724012, -187.66986708963955), (45.893902511294684, -188.44019546742044), (47.254512777966795, -191.51308464521048), (49.338105822419571, -195.28713235633671), (51.462446111316957, -199.85174377857717), (55.966580133557194, -201.14335635636013), (61.651726666913262, -201.72621015636247), (67.594096178048147, -201.86848966747417), (73.081235600292317, -200.06806428968918), (77.30289904475363, -198.43108508968263), (80.681962644767168, -195.3216537785591), (84.430601889226594, -192.88038357854933), (87.557666444794663, -192.06625148965716), (91.359953311476531, -191.02660691187523), (94.175969467043345, -193.19747153410614), (95.332273422603535, -195.78396764522762), (96.630439200386505, -198.55291477857205), (97.394166400389551, -201.35628737858323), (97.476214044834336, -203.89728080081559), (99.058952955951767, -206.28356000082516), (99.748862111510078, -208.80787126750189), (99.8348382892882, -210.91499600084367), (104.23237697819468, -213.02346128974099), (102.29589791152027, -209.80744593417256), (102.02877175596365, -209.25407871194813), (101.75573586707367, -208.69747440083481), (101.60000000040637, -208.09999866749905), (101.60000000040637, -208.09999866749905)]
new_pts = [(-76.199999999999974, -24.314285466666718), (-76.199999999999974, -24.314285466666718), (-80.207244546666658, -17.29278284444451), (-75.553305839999993, -9.5915649333333626), (-71.786479631111092, -3.6148094666667494), (-69.00859395555554, 0.21023862222211878), (-69.049482311111092, 5.5324360888887831), (-65.19771906666665, 8.7164615555554192), (-60.901794488888875, 13.293756044444338), (-54.379921155555543, 13.437012044444341), (-48.761141999999978, 15.11411195555544), (-42.773611288888858, 16.545977688888836), (-35.212194977777763, 15.005320933333229), (-32.490974444444426, 8.8595425777777201), (-28.323788355555543, 1.3114471555554539), (-24.075107777777767, -7.8177756888889505), (-15.066839733333325, -10.40100084444453), (-3.69654666666667, -11.566708444444547), (8.1881923555555609, -11.851267466666799), (19.162471200000002, -8.2504167111112245), (27.605798088888854, -4.9764583111112195), (34.3639252888889, 1.2424043111109639), (41.86120377777776, 6.1249447111109703), (48.115332888888879, 7.7532088888887873), (55.719906622222197, 9.8324980444443266), (61.351938933333301, 5.4907687999998771), (63.66454684444443, 0.31777657777761525), (66.260878399999982, -5.2201176888890854), (67.788332799999964, -10.826862888889032), (67.95242808888888, -15.908849733333426), (71.11790591111108, -20.681408133333473), (72.497724222222189, -25.730030666666742), (72.669676577777736, -29.944280133333443), (81.464753955555523, -34.161210711111217), (77.591795822222196, -27.729180000000085), (77.057543511111078, -26.622445555555636), (76.511471733333309, -25.509236933333451), (76.199999999999946, -24.314285466666718), (76.199999999999946, -24.314285466666718)]

r1_ink = np.array(r1_ink)
r2_ink = np.array(r2_ink)
r1_emb = np.array(r1_emb)
r2_emb = np.array(r2_emb)
pts = np.array(pts)
new_pts = np.array(new_pts)

#plot the origianl points
x,y = pts.T
plt.plot(x, y, 'r-')
#plot the inkscape registration points
x,y = r1_ink
plt.plot(x, y, 'ro')
x,y = r2_ink
plt.plot(x, y, 'r^')

#plot the embroidery registration points
x,y =np.array(r1_emb)
plt.plot(x, y, 'mo')
x,y = np.array(r2_emb)
plt.plot(x, y, 'm^')

x,y = new_pts.T
plt.plot(x, y, 'm-')

plt.show()

#result = make_pes('C:\Users\Brian\Dropbox\Soft_Robotics_Toolkit_Contest_2017\Stitch Edit\\', 'testfile.pes', new_pts)
#result = make_pes('C:\Users\Brian\Dropbox\SoftRobots\\', 'testfile.pes', new_pts)
result = make_pes('D:\Brian\\', 'testfile.pes', new_pts, True)







